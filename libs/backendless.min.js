(function(){function h(){return"undefined"!==typeof window}function D(a,c){a._nextPage=a.nextPage;a.nextPage=function(a){return c._load(this._nextPage,a)};a.getPage=function(a,d,f){var e=this._nextPage.replace(/offset=\d+/ig,"offset="+a);d instanceof p?f=d:e=e.replace(/pagesize=\d+/ig,"pagesize="+d);f=l(arguments);return c._load(e,f)};a.dataMapper=c}function p(a,c,b){c instanceof Function||(b=c,c=r);this.success=function(c){a&&a.call(b,c)};this.fault=function(a){c&&c.call(b,a)}}function E(){this.properties=
[];this.options=this.condition=null}function v(a){this.model=a;this.className=w.call(a);"string"===(typeof a).toLowerCase()&&(this.className=a);if(!this.className)throw"Class name should be specified";this.restUrl=e.appPath+"/data/"+this.className}function F(){}function G(){this.restUrl=e.appPath+"/geo"}function H(){this.searchRectangle=null;this.categories=[];this.includeMeta=!1;this.pageSize=10;this.radius=this.longitude=this.latitude=0;this.units=null}function x(){this.eventHandlers={}}function y(a){this.restUrl=
a;this.timeout=this.timer=0;this.interval=1E3;this.xhr=null;this.needReconnect=!0;this.responder=new p(this.onMessage,this.onError,this);this.poll()}function z(a){var c=this;this.reconnectWithPolling=!0;try{var b=this.socket=new I(a);b.onopen=function(){return c.sockOpen()};b.onerror=function(a){return c.sockError(a)};b.onclose=function(a){c.onSocketClose()};b.onmessage=function(a){return c.onMessage(a)}}catch(d){setTimeout(function(){c.onSocketClose()},100)}}function A(a){this.channelName=a.channelName;
this.options=a.options;this.channelProperties=a.channelProperties;this.subscriptionId=null;this.restUrl=a.restUrl+"/"+a.channelName;this.responder=a.responder||r;this._subscribe(a.onSubscribe)}function J(){this.restUrl=e.appPath+"/messaging";this.channelProperties={}}function N(a,c,b){var d;d="--"+b;d+="\r\n";d+='Content-Disposition: form-data; name="file"';d+='; filename="'+a+'"';d+="\r\n";d+="Content-Type: application/octet-stream";d+="\r\n";d+="\r\n";d+=c;d+="\r\n";d+="--";d+=b;d+="--";return d+=
"\r\n"}function O(a){var c=new XMLHttpRequest,b="-backendless-multipart-form-boundary-"+(new Date).getTime();a=N(this.fileName,a.target.result,b);c.open("POST",this.uploadPath,!0);c.setRequestHeader("content-type","multipart/form-data; boundary="+b);c.setRequestHeader("application-id",e.applicationId);c.setRequestHeader("secret-key",e.secretKey);c.setRequestHeader("application-type","JS");var d=this.asyncHandler;d&&(c.onreadystatechange=function(){4==c.readyState&&(200<=c.status&&300>c.status?d.success(JSON.parse(c.responseText)):
d.fault(JSON.parse(c.responseText)))});c.sendAsBinary(a);if(d)return c;if(200<=c.status&&300>c.status)return c.responseText?JSON.parse(c.responseText):!0;throw badResponse(c);}function K(){this.restUrl=e.appPath+"/files"}NodeDevice={name:"NODEJS",platform:"NODEJS",uuid:"someId",version:"1"};h()||(encodeURIComponent=function(a){return escape(a)});var e=this.Backendless||{},r=function(){};this.Backendless=e;var u=Object.prototype,B=u.toString,P=u.hasOwnProperty,L=Array.prototype.forEach,u=Array.isArray,
I=h()?window.WebSocket||window.MozWebSocket:{};e.VERSION="0.1";e.serverURL="https://api.backendless.com";(function(){try{"undefined"==typeof XMLHttpRequest.prototype.sendAsBinary&&(XMLHttpRequest.prototype.sendAsBinary=function(a){for(var b=new ArrayBuffer(a.length),b=new Uint8Array(b,0),d=0;d<a.length;d++)b[d]=a.charCodeAt(d)&255;this.send(b)})}catch(a){}})();var Q=function(){var a=h()?navigator.userAgent.toLowerCase():"NodeJS",c=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||
/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],a=c[1]||"",c=c[2]||"0",b={};a&&(b[a]=!0,b.version=c);return b}();e.browser=Q;var n=e.Utils={isObject:function(a){return a===Object(a)},isString:function(a){return"[object String]"===B.call(a)},isNumber:function(a){return"[object Number]"===B.call(a)}};n.isArray=u||function(a){return"[object Array]"===B.call(a)};n.addEvent=function(a,c,b){c.addEventListener?
c.addEventListener(a,b,!1):c.attachEvent?c.attachEvent("on"+a,b):c[a]=b};n.removeEvent=function(a,c){c.removeEventListener?c.removeEventListener(a,null,!1):c.detachEvent?c.detachEvent("on"+a,null):c[a]=null};n.forEach=function(a,c,b){if(a)if(L&&a.forEach===L)a.forEach(c,b);else if(a.length===+a.length)for(var d=0,f=a.length;d<f&&!(d in a&&c.call(b,a[d],d,a)===breaker);d++);else for(d in a)if(P.call(a,d)&&c.call(b,a[d],d,a)===breaker)break};e._ajax_for_browser=function(a){a.method=a.method||"GET";
a.isAsync="boolean"==typeof a.isAsync?a.isAsync:!1;var c=function(a){var b={};try{b=JSON.parse(a.responseText)}catch(c){b.message=a.responseText}b.statusCode=a.status;return b},b=new XMLHttpRequest;a.isAsync&&(b.onreadystatechange=function(){var d;if(4==b.readyState)if(200<=b.status&&300>b.status){if(b.responseText)try{d=JSON.parse(b.responseText)}catch(e){d=b.responseText}else d=!0;a.asyncHandler.success(d)}else a.asyncHandler.fault&&a.asyncHandler.fault(c(b))});var d=a.data;b.open(a.method,a.url,
a.isAsync);b.setRequestHeader("Content-Type",d?"application/json":"application/x-www-form-urlencoded");b.setRequestHeader("application-id",e.applicationId);b.setRequestHeader("secret-key",e.secretKey);b.setRequestHeader("application-type","JS");null!=m&&b.setRequestHeader("user-token",m["user-token"]);b.send(d);if(a.isAsync)return b;if(200<=b.status&&300>b.status)return b.responseText?JSON.parse(b.responseText):!0;throw c(b);};e._ajax_for_nodejs=function(a){a.data=a.data||"";"string"!==typeof a.data&&
(a.data=JSON.stringify(a.data));a.asyncHandler=a.asyncHandler||{};a.isAsync="boolean"==typeof a.isAsync?a.isAsync:!1;var c=a.url.substr(0,a.url.indexOf("/",8)).substr(0,a.url.indexOf(":")),b=a.url.substr(0,a.url.indexOf("/",8)).substr(a.url.indexOf("/")+2),d=b.substr(0,-1==b.indexOf(":")?b.length:b.indexOf(":")),b=-1!=b.indexOf(":")?parseInt(b.substr(b.indexOf(":")+1)):"http"==c?80:443,d={host:d,port:b,method:a.method||"GET",path:a.url.substr(a.url.indexOf("/",8)),headers:{"Content-Length":a.data?
a.data.length:0,"Content-Type":a.data?"application/json":"application/x-www-form-urlencoded","application-id":e.applicationId,"secret-key":e.secretKey,"application-type":"JS"}};null!=m&&(d.headers["user-token"]=m["user-token"]);c=a.isAsync?require(c).request(d,function(b){b.setEncoding("utf8");b.on("data",function(b){console.log("BODY: "+b);a.asyncHandler.success(b)})}):require("httpsync").request(d);c.on("error",function(b){a.asyncHandler.fault||(a.asyncHandler.fault=function(){});a.asyncHandler.fault(b)});
c.write(a.data,"utf8");return c.end()};e._ajax=h()?e._ajax_for_browser:e._ajax_for_nodejs;var w=function(){var a=/function (.{1,})\(/.exec(this.constructor===Function?this.toString():this.constructor.toString());return a&&1<a.length?a[1]:""},t=function(a){var c=[],b,d;b=0;for(d=a.length;b<d;++b)c.push(encodeURIComponent(a[b]));return c.join(",")},s=function(a,c){for(var b in c)void 0!=c[b]&&(a[b]=a[b]||{},a[b]=c[b]);return a},l=function(a){var c,b;c=0;for(b=a.length;c<b;++c)if(a[c]instanceof p)return a[c];
return null};e.Async=p;E.prototype={addProperty:function(a){this.properties=this.properties||[];this.properties.push(a)}};e.DataQuery=E;v.prototype={_extractQueryOptions:function(a){var c=[];if("undefined"!=typeof a.pageSize){if(1>a.pageSize||100<a.pageSize)throw Error("PageSize can not be less then 1 or greater than 100");c.push("pageSize="+encodeURIComponent(a.pageSize))}if(a.offset){if(0>a.offset)throw Error("Offset can not be less then 0");c.push("offset="+encodeURIComponent(a.offset))}a.sortBy&&
(n.isString(a.sortBy)?c.push("sortBy="+encodeURIComponent(a.sortBy)):n.isArray(a.sortBy)&&c.push("sortBy="+t(a.sortBy)));a.related&&n.isArray(a.related)&&c.push("loadRelations="+t(a.related));return c.join("&")},_wrapAsync:function(a){var c=this;return new p(function(b){b=c._parseResponse(b);a.success(b)},function(b){a.fault(b)})},_parseResponse:function(a){var c,b=this.model;if(a.data){var d=a,e=d.data;a=0;for(c=e.length;a<c;++a){e[a]=e[a].fields||e[a];var g=new b;s(g,e[a])}D(d,this);return d}a=
a.fields||a;g=new b;s(g,a);return g},_getSingle:function(a,c){var b=l(a),d=!1;null!=b&&(d=!0,b=this._wrapAsync(b));b=e._ajax({method:"GET",url:this.restUrl+c,isAsync:d,asyncHandler:b});return d?b:this._parseResponse(b)},_load:function(a,c){var b=l(arguments),d=!1;null!=b&&(d=!0,b=this._wrapAsync(b));b=e._ajax({method:"GET",url:a,isAsync:d,asyncHandler:b});return d?b:this._parseResponse(b)},save:function(a,c){var b=l(arguments),d=!1,f="POST",g=this.restUrl;a.objectId&&(f="PUT",g+="/"+a.objectId);null!=
b&&(d=!0,b=this._wrapAsync(b));b=e._ajax({method:f,url:g,data:JSON.stringify(a),isAsync:d,asyncHandler:b});return d?b:this._parseResponse(b)},remove:function(a,c){var b=l(arguments),d=!1;a=a.objectId||a;null!=b&&(d=!0,b=this._wrapAsync(b));b=e._ajax({method:"DELETE",url:this.restUrl+"/"+a,isAsync:d,asyncHandler:b});return d?b:this._parseResponse(b)},find:function(a,c){a=a||{};var b,d,f,g=[];a.properties&&(b="props="+t(a.properties));a.condition&&(d="where="+encodeURIComponent(a.condition));a.options&&
(f=this._extractQueryOptions(a.options));f&&g.push(f);d&&g.push(d);b&&g.push(b);g=g.join("&");d=l(arguments);b=!1;null!=d&&(b=!0,d=this._wrapAsync(d));g=e._ajax({method:"GET",url:this.restUrl+"?"+g,isAsync:b,asyncHandler:d});return b?g:this._parseResponse(g)},findById:function(a,c){var b="[object Array]"===Object.prototype.toString.call(c)?c.join(","):"*";return this._getSingle(arguments,"/"+a+"?loadRelations="+b)},loadRelations:function(a,c){var b="[object Array]"===Object.prototype.toString.call(c)?
c.join(","):"*";return this._getSingle(arguments,"/"+a+"/relations?loadRelations="+b)},findFirst:function(a){return this._getSingle(arguments,"/first")},findLast:function(a){return this._getSingle(arguments,"/last")}};var C={},R={save:function(a,c,b){var d=l(arguments);if(n.isString(a))return e._ajax({method:"POST",url:e.appPath+"/data/"+a,data:JSON.stringify(c),isAsync:!1,asyncHandler:d});if(n.isObject(a))return(new v(a)).save(a,c,b)},of:function(a){var c=w.call(a),b=C[c];b||(b=new v(a),C[c]=b);
return b},describe:function(a,c){a=n.isString(a)?a:w.call(a);var b=l(arguments);return e._ajax({method:"GET",url:e.appPath+"/data/"+a+"/properties",isAsync:null!=b,asyncHandler:b})}};F.prototype={password:null};e.User=F;var m=null,M=function(){this.restUrl=e.appPath+"/users"};M.prototype={_wrapAsync:function(a){var c=this;return new p(function(b){try{b=JSON.parse(b)}catch(d){}m=c._parseResponse(b);a.success(c._getUserFromResponse(m))},function(b){a.fault(b)})},_parseResponse:function(a){var c=new e.User;
s(c,a);return c},register:function(a,c){if(!(a instanceof e.User))throw Error("Only Backendless.User accepted");var b=l(arguments),d=null!=b;b&&(b=this._wrapAsync(b));b=e._ajax({method:"POST",url:this.restUrl+"/register",isAsync:d,asyncHandler:b,data:JSON.stringify(a)});return d?b:this._parseResponse(b)},roleHelper:function(a,c,b,d){if(!a)throw Error("Username can not be empty");if(!c)throw Error("Rolename can not be empty");var f=l(arguments),g=null!=f;f&&(f=this._wrapAsync(f));f=e._ajax({method:"POST",
url:this.restUrl+"/"+d,isAsync:g,asyncHandler:f,data:JSON.stringify({user:a,roleName:c})});g||(m=null);return f},assignRole:function(a,c,b){return this.roleHelper(a,c,b,"assignRole")},unassignRole:function(a,c,b){return this.roleHelper(a,c,b,"unassignRole")},login:function(a,c,b){if(!a)throw Error("Username can not be empty");if(!c)throw Error("Password can not be empty");var d=l(arguments),f=null!=d;d&&(d=this._wrapAsync(d));d=e._ajax({method:"POST",url:this.restUrl+"/login",isAsync:f,asyncHandler:d,
data:JSON.stringify({login:a,password:c})});if(f)return d;m=this._parseResponse(d);return this._getUserFromResponse(m)},_getUserFromResponse:function(a){var c=new e.User,b;for(b in a)"user-token"!=b&&(c[b]=a[b]);return c},describeUserClass:function(a){var c=l(arguments),b=null!=c,c=e._ajax({method:"GET",url:this.restUrl+"/userclassprops",isAsync:c,asyncHandler:c});b||(m=null);return c},restorePassword:function(a,c){if(!a)throw"Username can not be empty";var b=l(arguments),d=null!=b,b=e._ajax({method:"GET",
url:this.restUrl+"/restorepassword/"+encodeURIComponent(a),isAsync:d,asyncHandler:b});d||(m=null);return b},logout:function(a){var c=l(arguments),b=null!=c,c=e._ajax({method:"GET",url:this.restUrl+"/logout",isAsync:b,asyncHandler:c});b||(m=null);return c},getCurrentUser:function(){return m},update:function(a,c){if(!(a instanceof e.User))throw Error("Only Backendless.User accepted");var b=l(arguments),d=null!=b;b&&(b=this._wrapAsync(b));b=e._ajax({method:"PUT",url:this.restUrl+"/"+a.id,isAsync:d,asyncHandler:b,
data:JSON.stringify(a)});return d?b:this._parseResponse(b)},loginWithFacebook:function(a,c,b,d){this._loginSocial("Facebook",a,c,b,d)},loginWithTwitter:function(a,c){this._loginSocial("Twitter",a,null,c,null)},_socialContainer:function(a,c){var b;if(c){var d;c=c[0];b=document.createElement("div");b.innerHTML="Loading...";c.appendChild(b);c.style.cursor="wait";this.closeContainer=function(){c.style.cursor="default";c.removeChild(d)};this.removeLoading=function(){c.removeChild(b)};this.doAuthorizationActivity=
function(a){this.removeLoading();d=document.createElement("iframe");d.frameBorder=0;d.width=c.style.width;d.height=c.style.height;d.id="SocialAuthFrame";d.setAttribute("src",a+"&amp;output=embed");c.appendChild(d);d.onload=function(){c.style.cursor="default"}}}else c=window.open("",a+" authorization","height=250,width=450,scrollbars=0,toolbar=0,menubar=0,location=0,resizable=0,status=0,titlebar=0",!1),b=c.document.getElementsByTagName("body")[0].innerHTML,b="Loading...",c.document.getElementsByTagName("html")[0].style.cursor=
"wait",this.closeContainer=function(){c.close()},this.removeLoading=function(){b=null},this.doAuthorizationActivity=function(a){c.location.href=a;c.onload=function(){c.document.getElementsByTagName("html")[0].style.cursor="default"}}},_loginSocial:function(a,c,b,d,f){var g=new this._socialContainer(a,f),k=l(arguments);k&&(k=this._wrapAsync(k));n.addEvent("message",window,function(a){a.origin==e.serverURL&&(a=JSON.parse(a.data),a.fault?k.fault(a.fault):(m=this._parseResponse(a),k.success(this._getUserFromResponse(m))),
n.removeEvent("message",window),g.closeContainer())});var h=new e.Async(function(a){g.doAuthorizationActivity(a)},function(a){g.closeContainer();k.fault(a)}),q=c||b?{}:null;c&&(q.fieldsMapping=c);b&&(q.permissions=b);e._ajax({method:"POST",url:this.restUrl+"/social/oauth/"+a.toLowerCase()+"/request_url",isAsync:!0,asyncHandler:h,data:JSON.stringify(q)})},loginWithFacebookSdk:function(a,c){if(!FB)throw Error("Facebook SDK not found");var b=this;FB.getLoginStatus(function(d){"connected"===d.status?
b._sendFacebookLoginRequest(b,d,a,c):FB.login(function(d){b._sendFacebookLoginRequest(b,d,a,c)})})},_sendFacebookLoginRequest:function(a,c,b,d){"connected"===c.status&&(c=c.authResponse,b&&(c.fieldsMapping=b),b=new e.Async(function(b){m=a._parseResponse(b);d.success(a._getUserFromResponse(m))},function(a){d.fault(a)}),e._ajax({method:"POST",url:a.restUrl+"/social/facebook/login/"+e.applicationId,isAsync:!0,asyncHandler:b,data:JSON.stringify(c)}))}};H.prototype={addCategory:function(){this.categories=
this.categories||[];this.categories.push()}};e.GeoQuery=H;G.prototype={UNITS:{METERS:"METERS",KILOMETERS:"KILOMETERS",MILES:"MILES",YARDS:"YARDS",FEET:"FEET"},_wrapAsync:function(a){var c=this;return new p(function(b){b=c._parseResponse(b);a.success(b)},function(b){a.fault(b)})},_parseResponse:function(a){a=a.collection;D(a,this);return a},_load:function(a,c){var b=l(arguments),d=null!=b,b=e._ajax({method:"GET",url:a,isAsync:d,asyncHandler:b});return d?b:this._parseResponse(b)},addPoint:function(a,
c){if(void 0===a.latitude||void 0===a.longitude)throw"Latitude or longitude not a number";a.categories=a.categories||["Default"];a.categories=n.isArray(a.categories)?a.categories:[a.categories];var b=l(arguments),d=null!=b,f="lat="+a.latitude,f=f+("&lon="+a.longitude);a.categories&&(f+="&categories="+t(a.categories));a.metadata&&(f+="&metadata="+JSON.stringify(a.metadata));return e._ajax({method:"PUT",url:this.restUrl+"/points?"+f,isAsync:d,asyncHandler:b})},find:function(a,c){var b=this.restUrl,
d=l(arguments),f=!1;null!=d&&(f=!0,d=this._wrapAsync(d));if(a.searchRectangle&&a.radius)throw"Inconsistent geo query. Query should not contain both rectangle and radius search parameters.";if(a.searchRectangle)var g=a.searchRectangle,b=b+"/rect?"+["nwlat="+g[0],"nwlon="+g[1],"selat="+g[2],"selon="+g[3]].join("&");else{if(a.radius&&(void 0===a.latitude||void 0===a.longitude))throw"Latitude and longitude should be provided to search in radius";b+="/points?";void 0!=a.latitude&&(b+="lat="+a.latitude,
b+="&lon="+a.longitude,b+="&units="+(a.units?a.units:e.Geo.UNITS.KILOMETERS))}a.metadata&&(b+="&metadata="+JSON.stringify(a.metadata));a.radius&&(b+="&r="+a.radius);a.categories&&(a.categories=n.isString(a.categories)?[a.categories]:a.categories,b+="&categories="+t(a.categories));a.includeMetadata&&(b+="&includemetadata=true");if(a.pageSize){if(1>a.pageSize||100<a.pageSize)throw Error("PageSize can not be less then 1 or greater than 100");b+="&pagesize="+a.pageSize}if(a.offset){if(0>a.offset)throw Error("Offset can not be less then 0");
b+="&offset="+a.offset}b=b.replace(/\?&/g,"?");b=e._ajax({method:"GET",url:b,isAsync:f,asyncHandler:d});return f?b:this._parseResponse(b)},addCategory:function(a,c){if(!a)throw Error("Category name is requred.");var b=l(arguments),b=e._ajax({method:"PUT",url:this.restUrl+"/categories/"+a,isAsync:null!=b,asyncHandler:b});return"undefined"===typeof b.result?b:b.result},getCategories:function(a){var c=l(arguments);return e._ajax({method:"GET",url:this.restUrl+"/categories",isAsync:null!=c,asyncHandler:c})},
deleteCategory:function(a,c){if(!a)throw Error("Category name is requred.");var b=l(arguments),b=e._ajax({method:"DELETE",url:this.restUrl+"/categories/"+a,isAsync:null!=b,asyncHandler:b});return"undefined"===typeof b.result?b:b.result}};x.prototype={on:function(a,c){if(!a)throw Error("Event name not specified");if(!c)throw Error("Handler not specified");this.eventHandlers[a]=this.eventHandlers[a]||[];this.eventHandlers[a].push(c)},fireEvent:function(a,c){var b=this.eventHandlers[a]||[],d,e;e=0;for(d=
b.length;e<d;++e)b[e](c)}};y.prototype=new x;s(y.prototype,{onMessage:function(a){clearTimeout(this.timeout);var c=this;this.timer=setTimeout(function(){c.poll()},this.interval);this.fireEvent("messageReceived",a)},poll:function(){var a=this;this.timeout=setTimeout(function(){a.onTimeout()},3E4);this.xhr=e._ajax({method:"GET",url:this.restUrl,isAsync:!0,asyncHandler:this.responder})},close:function(){clearTimeout(this.timer);clearTimeout(this.timeout);this.needReconnect=!1;this.xhr&&this.xhr.abort()},
onTimeout:function(){this.xhr&&this.xhr.abort()},onError:function(){clearTimeout(this.timer);clearTimeout(this.timeout);if(this.needReconnect){var a=this;this.xhr=null;this.timer=setTimeout(function(){a.poll()},this.interval)}}});z.prototype=new x;s(z.prototype,{onMessage:function(){this.fireEvent("messageReceived",data)},onSocketClose:function(a){this.reconnectWithPolling&&this.fireEvent("socketClose",a)},close:function(){this.reconnectWithPolling=!1;this.socket.close()}});A.prototype={_subscribe:function(a){var c=
l(arguments),b=null!=c,d=this,f=new p(function(a){d.subscriptionId=a.subscriptionId;d._startSubscription()},function(a){c.fault(a)}),f=e._ajax({method:"POST",url:this.restUrl+"/subscribe",isAsync:b,data:JSON.stringify(this.options),asyncHandler:f});b||(this.subscriptionId=f.subscriptionId,this._startSubscription())},_startSubscription:function(){var a=this;I?(this.proxy=new z(this.channelProperties.websocket+"/"+this.subscriptionId),this.proxy.on("socketClose",function(){a._switchToPolling()}),this.proxy.on("messageReceived",
function(){a.responder()})):this._switchToPolling();this._startSubscription=r},cancelSubscription:function(){this.proxy&&this.proxy.close();this._startSubscription=r},_switchToPolling:function(){this.proxy=new y(this.restUrl+"/"+this.subscriptionId);var a=this;this.proxy.on("messageReceived",function(c){c.messages.length&&a.responder(c)})}};J.prototype={_getProperties:function(a,c){var b=l(arguments),d=null!=b,f=this.channelProperties[a];if(f)return d&&c.success(f),f;b=e._ajax({method:"GET",url:this.restUrl+
"/"+a+"/properties",isAsync:d,asyncHandler:b});return this.channelProperties[a]=b},subscribe:function(a,c,b,d){var e=l(arguments);if(null!=e){var g=this,k=new p(function(k){d.success(new A({channelName:a,options:b,channelProperties:k,responder:c,restUrl:g.restUrl,onSubscribe:e}))},function(a){e.fault(a)});this._getProperties(a,k)}else return k=this._getProperties(a),new A({channelName:a,options:b,channelProperties:k,responder:c,restUrl:this.restUrl})},publish:function(a,c,b,d,f){var g=l(arguments),
k=null!=g,h={message:c};if(b){if(!(b instanceof PublishOptions))throw"Use PublishOption as publishOptions argument";s(h,b)}if(d){if(!(d instanceof DeliveryOptions))throw"Use DeliveryOptions as deliveryTarget argument";s(h,d)}return e._ajax({method:"POST",url:this.restUrl+"/"+a,isAsync:k,asyncHandler:g,data:JSON.stringify(h)})},cancel:function(a,c){return e._ajax({method:"DELETE",url:this.restUrl+"/"+a,isAsync:null!=c,asyncHandler:new p(r)})},registerDevice:function(a,c,b){var d=l(arguments),f=null!=
d,g=h()?window.device:NodeDevice,k={deviceToken:null,deviceId:g.uuid,os:g.platform,osVersion:g.version};n.isArray(a)&&(k.channels=a);for(var g=0,m=arguments.length;g<m;++g){var q=arguments[g];if(n.isNumber(q)||q instanceof Date)k.expiration=q instanceof Date?q.getTime()/1E3:q}var p=this.restUrl+"/registrations";cordova.exec(function(a){k.deviceToken=a;e._ajax({method:"POST",url:p,data:JSON.stringify(k),isAsync:f,asyncHandler:d})},function(a){console.warn(JSON.stringify(["failed to register ",a]))},
"PushNotification","registerDevice",[{projectid:"http://backendless.com",appid:e.applicationId}])},getRegistrations:function(a){var c=h()?window.device.uuid:NodeDevice.uuid,b=l(arguments);return e._ajax({method:"GET",url:this.restUrl+"/registrations/"+c,isAsync:null!=b,asyncHandler:b})},unregisterDevice:function(a){var c=h()?window.device.uuid:NodeDevice.uuid,b=l(arguments),c=e._ajax({method:"DELETE",url:this.restUrl+"/registrations/"+c,isAsync:null!=b,asyncHandler:b});try{cordova.exec(r,r,"PushNotification",
"unregisterDevice",[])}catch(d){console.log(d.message)}return c}};K.prototype={upload:function(a,c,b){a=a.files||a;c=this.restUrl+"/"+c+"/";if(h())if(window.File&&window.FileList){a instanceof File&&(a=[a]);for(var d=0,e=0,g=a.length;e<g;e++)try{var k=new FileReader;k.fileName=a[e].name;k.uploadPath=c+k.fileName;k.onloadend=O;k.asyncHandler=b;k.onerror=function(a){b.fault(a)};k.readAsBinaryString(a[e])}catch(l){d++}}else d=document.createElement("iframe"),d.id=d.name="ifr"+(new Date).getTime(),d.width=
d.height="0",document.body.appendChild(d),k=document.createElement("form"),k.target=d.name,k.enctype="multipart/form-data",k.method="POST",document.body.appendChild(k),k.appendChild(a),a=a.value,(d=a.lastIndexOf("\\"))&&(a=a.substring(d+1)),k.action=c+a,k.submit();else throw"Upload File not supported with NodeJS";},remove:function(a,c){var b=l(arguments),d=null!=b,f=0==a.indexOf("http://")||0==a.indexOf("https://")?a:this.restUrl+"/"+a;e._ajax({method:"DELETE",url:f,isAsync:d,asyncHandler:b})},removeDirectory:function(a,
c){var b=l(arguments);e._ajax({method:"DELETE",url:this.restUrl+"/"+a,isAsync:null!=b,asyncHandler:b})}};e.initApp=function(a,c,b){e.applicationId=a;e.secretKey=c;e.appVersion=b;e.appPath=[e.serverURL,e.appVersion].join("/");e.UserService=new M;e.Geo=new G;e.Persistence=R;e.Messaging=new J;C={};e.Files=new K;m=null};h()||(module.exports=e)})();
var BackendlessGeoQuery=function(){this.searchRectangle=void 0;this.categories=[];this.includeMetadata=!0;this.units=this.radius=this.longitude=this.latitude=this.pageSize=this.metadata=void 0};BackendlessGeoQuery.prototype={addCategory:function(){this.categories=this.categories||[];this.categories.push()}};
var PublishOptionsHeaders={MESSAGE_TAG:"message",IOS_ALERT_TAG:"ios-alert",IOS_BADGE_TAG:"ios-badge",IOS_SOUND_TAG:"ios-sound",ANDROID_TICKER_TEXT_TAG:"android-ticker-text",ANDROID_CONTENT_TITLE_TAG:"android-content-title",ANDROID_CONTENT_TEXT_TAG:"android-content-text",ANDROID_ACTION_TAG:"android-action",WP_TYPE_TAG:"wp-type",WP_TITLE_TAG:"wp-title",WP_TOAST_SUBTITLE_TAG:"wp-subtitle",WP_TOAST_PARAMETER_TAG:"wp-parameter",WP_TILE_BACKGROUND_IMAGE:"wp-backgroundImage",WP_TILE_COUNT:"wp-count",WP_TILE_BACK_TITLE:"wp-backTitle",
WP_TILE_BACK_BACKGROUND_IMAGE:"wp-backImage",WP_TILE_BACK_CONTENT:"wp-backContent",WP_RAW_DATA:"wp-raw"},PublishOptions=function(h){h=h||{};this.publisherId=h.publisherId||void 0;this.headers=h.headers||void 0;this.subtopic=h.subtopic||void 0},DeliveryOptions=function(h){h=h||{};this.pushPolicy=h.pushPolicy||void 0;this.pushBroadcast=h.pushBroadcast||void 0;this.pushSinglecast=h.pushSinglecast||void 0;this.publishAt=h.publishAt||void 0;this.repeatEvery=h.repeatEvery||void 0;this.repeatExpiresAt=h.repeatExpiresAt||
void 0},SubscriptionOptions=function(h){h=h||{};this.subscriberId=h.subscriberId||void 0;this.subtopic=h.subtopic||void 0;this.selector=h.selector||void 0};
